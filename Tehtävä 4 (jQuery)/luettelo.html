<!DOCTYPE html>
<html lang="fi">
  <head>
    <h1>PUHELINLUETTELO</h1>
    <meta charset="UTF-8" />
    <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <a href="/index.html">
      <input type="button" value="Takaisin etusivulle" />
    </a>
    <section>
      <!-- TABLE CONSTRUCTION-->
      <table id="table">
        <!-- HEADING FORMATION -->
        <tbody id="lista">
          <tr>
            <th id="nimiHeader">Nimi</th>
            <th id="puhHeader">Puhelin</th>
          </tr>
        </tbody>
      </table>
    </section>
    <script>
      //hakee json tiedoston ja luo siitä taulukon josta löytyvät nimi ja numero
      $(document).ready(function () {
        $.getJSON(
          "http://a41d.k.time4vps.cloud:3001/henkilot",
          function (result) {
            for (let i = 0; i < result.length; i++) {
              let obj = result[i];
              let tr = document.createElement("tr");
              let th = document.createElement("th");
              let th2 = document.createElement("th");
              let nimi = document.createTextNode(obj.nimi);
              let puhelin = document.createTextNode(obj.puhelin);
              th.appendChild(nimi);
              th2.appendChild(puhelin);
              tr.appendChild(th);
              tr.appendChild(th2);
              document.getElementById("lista").appendChild(tr);
            }
          }
        );
      });
    </script>
  </body>
</html>
